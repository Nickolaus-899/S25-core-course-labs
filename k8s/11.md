# Secrets management


## Creting secret with `kubectl` (opaque)
We can create some test secret 
```
kubectl create secret generic test-secret --from-literal=password=12345
```

After that, we can verify that the secret was created

![secret verification](./readme_images/secret/opaque.png)

The password `12345` was successfully stored and then decoded

## Creating secrets with `Helm`

I've created `secrets.yaml` in the templates. After that, I 
generated a key with the use of `gpg`:
```
gpg --gen-key
```

To view keys we can use
```
gpg --list-keys
```

After encrypting a secret, we can see the output:
![view decoded secrets](./readme_images/secret/view_decode.png)

File `secrets.enc.yaml` I saved in k8s directory under the name `secrets.yaml`

#### Now, we can run application

```
helm secrets install python-app ./python-app -n default -f secrets.yaml
```

![helm install](./readme_images/secret/helm_secrets.png)
![verify](./readme_images/secret/get_po.png)